
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>币安 Alpha 空投日历 - 实时监控币安Alpha项目空投</title>
    <meta name="description" content="币安 Alpha 空投日历为您提供最新的币安Alpha项目空投信息，包括今日空投和空投预告，帮助您不错过任何一次币安Alpha项目的空投机会。">
    <meta name="keywords" content="币安,Binance,Alpha,空投,币安空投,空投日历,Alpha空投,加密货币,数字货币">
    <meta name="author" content="alpha123.uk">
    <meta property="og:title" content="币安 Alpha 空投日历">
    <meta property="og:description" content="实时追踪币安 Alpha 项目空投">
    <meta property="og:url" content="https://alpha123.uk/zh/">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="币安 Alpha 空投日历">
    <meta property="og:locale" content="zh_CN">
    <!-- Open Graph / Facebook -->
    <meta property="og:image" content="https://alpha123.uk/AirdropsCalendar/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="币安 Alpha 空投日历 - 实时追踪空投">
    
    <!-- Twitter Card - 自动选择最佳显示方式 -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="币安 Alpha 空投日历">
    <meta name="twitter:description" content="实时追踪币安 Alpha 项目空投">
    <meta name="twitter:image" content="https://alpha123.uk/AirdropsCalendar/og-image-144.png">
    <meta name="twitter:image:alt" content="币安 Alpha 空投日历 - 实时追踪空投">
    
    <!-- 备用小尺寸图片不再通过 twitter:image:src 指定，避免与 summary_large_image 冲突 -->
    <meta name="twitter:site" content="@alpha123uk">
    <meta name="twitter:creator" content="@alpha123uk">
    <link rel="icon" type="image/png" href="/AirdropsCalendar/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/AirdropsCalendar/favicon.svg" />
    <link rel="shortcut icon" href="/AirdropsCalendar/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/AirdropsCalendar/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="币安Alpha空投" />
    <link rel="manifest" href="/AirdropsCalendar/site.webmanifest" />
    <link rel="canonical" href="https://alpha123.uk/zh/" />
    <link rel="alternate" hreflang="x-default" href="https://alpha123.uk/" />
    <link rel="alternate" hreflang="en" href="https://alpha123.uk/" />
    <link rel="alternate" hreflang="zh-CN" href="https://alpha123.uk/zh/" />
    <link rel="alternate" hreflang="ja-JP" href="https://alpha123.uk/ja/" />
    <link rel="alternate" hreflang="ko-KR" href="https://alpha123.uk/ko/" />
    <link rel="alternate" hreflang="vi-VN" href="https://alpha123.uk/vi/" />
    <link rel="stylesheet" href="/css/bootstrap-icons.css">
    <link rel="stylesheet" href="/css/airdrop.css?v=1.0.42">
    <script src="/js/language.js?v=1.0.3"></script>
    <script src="/js/tge-info.js?v=1.0.20"></script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "币安 Alpha 空投日历",
      "url": "https://alpha123.uk/zh/",
      "publisher": {
        "@type": "Organization",
        "name": "Alpha123",
        "url": "https://alpha123.uk/",
        "sameAs": [
          "https://twitter.com/alpha123cc",
          "https://twitter.com/alpha123uk"
        ]
      }
    }
    </script>
</head>
<body>
    <header>
        <div class="container">
            <a href="/zh" class="logo">
                币安 <span>Alpha</span> 空投日历
            </a>
            <button id="refreshButton" class="theme-toggle">
                <i class="bi bi-arrow-clockwise"></i>
            </button>
            <div class="header-links">
                <a href="/zh" class="nav-link active">今日空投</a>
                <a href="/zh/history.html" class="nav-link">历史空投</a>
                <a href="/calendar/" class="nav-link">收益日历</a>
            </div>
        </div>
    </header>
    <main class="main">
        <div class="container">
            <h2 class="section-title">
                <i class="bi bi-gift-fill"></i> 今日空投
            </h2>
            <div class="airdrops-table-wrapper">
                <table class="airdrops-table" id="today-airdrops">
                    <thead>
                        <tr>
                            <th>项目</th>
                            <th>积分</th>
                            <th>数量</th>
                            <th>时间</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="4" class="loading">
                                <div class="spinner"></div>
                                <p>加载中...</p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <h2 class="section-title"><i class="bi bi-calendar-event"></i> 空投预告</h2>
            <div class="airdrops-table-wrapper">
                <table class="airdrops-table" id="upcoming-airdrops">
                    <thead>
                        <tr>
                            <th>项目</th>
                            <th>积分</th>
                            <th>数量</th>
                            <th>时间</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="4" class="loading">
                                <div class="spinner"></div>
                                <p>加载中...</p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <h2 class="section-title"><i class="bi bi-tools"></i> 推荐工具</h2>
            <div class="airdrops-table-wrapper">
                <table class="airdrops-table" id="promo-tools">
                    <thead>
                        <tr>
                            <th>工具</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="loading">
                                <div class="spinner"></div>
                                <p>加载中...</p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>    
    <!-- 推特提醒模态框 -->
    <div id="twitterReminderModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="bi bi-bell-fill" style="color: #F0B90B;"></i> 空投提醒</h3>
                <button class="modal-close" onclick="closeTwitterModal()" style="-webkit-tap-highlight-color: transparent; touch-action: manipulation;">
                    <i class="bi bi-x-lg"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="reminder-text">
                    <p>Alpha123中文推特空投前20分钟推送，关注后再点𝕏小铃铛即可收到通知。</p>
                </div>
                
                <div class="modal-actions">
                    <a href="twitter://user?screen_name=alpha123cc" target="_blank" class="twitter-btn" onclick="handleTwitterLink(event)">
                        𝕏 通知
                    </a>
                    <a href="https://t.me/alpha123cn" target="_blank" rel="noopener noreferrer" class="twitter-btn telegram-btn">
                        <i class="bi bi-telegram" style="margin-right: 6px;"></i>通知
                    </a>
                    <a href="/manual/zh/debot-tutorial.html" target="_blank" rel="noopener noreferrer" class="twitter-btn dingtalk-btn">
                        钉钉通知
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- TGE信息弹窗 -->
    <div id="tgeInfoModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="bi bi-bar-chart-fill" style="color: #F0B90B;"></i> <span id="tgeModalTitle">TGE统计</span></h3>
                <button id="tgeRefreshBtn" class="modal-close" onclick="refreshTgeInfoModal()" title="刷新" style="margin-right: 6px; background-color: var(--card-bg); color: #F0B90B; width: 40px; height: 40px; padding: 0; -webkit-tap-highlight-color: transparent; touch-action: manipulation;">
                    <i class="bi bi-arrow-clockwise" style="color: #F0B90B; display: inline-block; font-size: 18px;"></i>
                </button>
                <button class="modal-close" onclick="closeTgeInfoModal()" style="width: 40px; height: 40px; padding: 0; -webkit-tap-highlight-color: transparent; touch-action: manipulation;">
                    <i class="bi bi-x-lg" style="font-size: 18px;"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="tge-info-content">
                    <div class="tge-info-row">
                        <span class="tge-label">目标</span>
                        <span class="tge-value"><span id="tgeTargetBnb"></span> BNB</span>
                    </div>
                    
                    <div class="tge-info-row">
                        <span class="tge-label">已募</span>
                        <span class="tge-value"><span id="tgeActualBnb"></span> BNB</span>
                    </div>
                    
                    <div class="tge-info-row">
                        <span class="tge-label">超募</span>
                        <span class="tge-value"><span id="tgeOversubscription"></span>x</span>
                    </div>
                    
                    <div class="tge-info-row">
                        <span class="tge-label">投入</span>
                        <span class="tge-value">
                            <input type="number" id="bnbInput" value="3.0" min="0" step="0.1" 
                                   onchange="updateCostCalculation()" oninput="updateCostCalculation()" onblur="formatBnbInput(this)"> <span>BNB</span>
                        </span>
                    </div>
                    
                    <div class="tge-info-row">
                        <span class="tge-label">可得</span>
                        <span class="tge-value"><span id="tgeTokenAmount"></span> <span id="tgeTokenSymbol"></span></span>
                    </div>
                    
                    <div class="tge-info-row">
                        <span class="tge-label">成本</span>
                        <span class="tge-value"><span id="tgeCost"></span> BNB</span>
                    </div>
                    
                    <div class="tge-info-row">
                        <span class="tge-label">价值</span>
                        <span class="tge-value tge-estimate"><div id="tgeEstimateUsd" class="value-text dex-price-value">-</div></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-left">
                    <a href="https://alpha123.uk" class="footer-link"><i class="bi bi-globe2"></i> alpha123.uk</a>
                </div>
                <div class="footer-right">
                    <div class="footer-links">
                        <div class="language-dropdown">
                            <a href="#" class="footer-link language-selector"><i class="bi bi-translate"></i> Language <i class="bi bi-caret-up-fill"></i></a>
                            <div class="language-menu">
                                <a href="/index.html" class="language-option" data-lang="en">English</a>
                                <a href="/zh/index.html" class="language-option" data-lang="zh">中文</a>
                                <a href="/ja/index.html" class="language-option" data-lang="ja">日本語</a>
                                <a href="/ko/index.html" class="language-option" data-lang="ko">한국어</a>
                                <a href="/vi/index.html" class="language-option" data-lang="vi">Tiếng Việt</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <script>
        // 添加时区辅助工具对象
        const TimeZoneHelper = {
            // 常量：北京时区偏移（UTC+8）
            BEIJING_OFFSET: 8,
            
            // 获取当前用户的时区偏移（小时）
            getUserTimezoneOffset: function() {
                return -new Date().getTimezoneOffset() / 60;
            },
            
            // 检查日期是否是今天
            isToday: function(dateObj) {
                const today = new Date();
                return dateObj.getDate() === today.getDate() &&
                       dateObj.getMonth() === today.getMonth() &&
                       dateObj.getFullYear() === today.getFullYear();
            },
            
            // 检查日期是否是明天
            isTomorrow: function(dateObj) {
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                return dateObj.getDate() === tomorrow.getDate() &&
                       dateObj.getMonth() === tomorrow.getMonth() &&
                       dateObj.getFullYear() === tomorrow.getFullYear();
            },
            
            // 检查日期是否是后天
            isDayAfterTomorrow: function(dateObj) {
                const dayAfterTomorrow = new Date();
                dayAfterTomorrow.setDate(dayAfterTomorrow.getDate() + 2);
                return dateObj.getDate() === dayAfterTomorrow.getDate() &&
                       dateObj.getMonth() === dayAfterTomorrow.getMonth() &&
                       dateObj.getFullYear() === dayAfterTomorrow.getFullYear();
            },
            
            // 格式化时间为本地时间字符串
            formatTime: function(dateObj) {
                return dateObj.toLocaleTimeString('zh-CN', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
            },
            
            // 将北京时间转换为本地时间
            convertBeijingToLocal: function(dateStr, timeStr, isPhase2 = false) {
                try {
                    if (!dateStr || !timeStr) {
                        return { success: false };
                    }
                    
                    // 解析北京时间
                    const beijingDateTime = new Date(`${dateStr}T${timeStr}:00+08:00`);
                    
                    if (isNaN(beijingDateTime.getTime())) {
                        return { success: false };
                    }
                    
                    // 如果是二段空投，根据业务规则加18小时
                    let finalDateTime = new Date(beijingDateTime);
                    if (isPhase2) {
                        finalDateTime = new Date(beijingDateTime.getTime() + 18 * 60 * 60 * 1000);
                    }
                    
                    // 提取本地时间的日期和时间部分
                    const localDate = finalDateTime.toISOString().split('T')[0];
                    const localTime = finalDateTime.toLocaleTimeString('zh-CN', {
                        hour: '2-digit',
                        minute: '2-digit',
                        hour12: false
                    });
                    
                    return {
                        success: true,
                        date: localDate,
                        time: localTime,
                        dateTime: finalDateTime,
                        beijing_date: dateStr,
                        beijing_time: timeStr
                    };
                } catch (e) {
                    console.error('时区转换错误:', e);
                    return { success: false };
                }
            }
        };

        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });
        function initializeApp() {
            loadAirdropData(true);
            checkForVersionUpdate(); // 检查版本更新
            loadPromoData(); // 加载推荐工具数据
            const refreshInterval = 10 * 60 * 1000;
            if (window.autoRefreshTimer) {
                clearInterval(window.autoRefreshTimer);
            }
            window.autoRefreshTimer = setInterval(function() {
                refreshData(true);
            }, refreshInterval);
            resetCountdown(refreshInterval / 1000);
            const refreshButton = document.getElementById('refreshButton');
            refreshButton.addEventListener('click', function() {
                refreshData(true);
                const icon = this.querySelector('i');
                icon.classList.add('rotating');
                setTimeout(() => {
                    icon.classList.remove('rotating');
                }, 1000);
            });
        }
        
        // 版本检查和自动刷新功能
        function checkVersionAndRefresh(currentVersion) {
            if (!currentVersion) return;
            
            // 从localStorage获取存储的版本号
            const storedVersion = localStorage.getItem('promo_data_version');
            
            if (storedVersion && storedVersion !== currentVersion) {
                console.log('检测到版本更新，准备刷新页面...', {
                    stored: storedVersion,
                    current: currentVersion
                });
                
                // 更新存储的版本号
                localStorage.setItem('promo_data_version', currentVersion);
                
                // 延迟500ms后刷新页面，避免频繁刷新
                setTimeout(() => {
                    window.location.reload();
                }, 500);
            } else {
                // 首次访问或版本无变化，更新存储的版本号
                localStorage.setItem('promo_data_version', currentVersion);
            }
        }
        
        // 转换chain_id为链名称
        function getChainName(chainId) {
            const chainMap = {
                '1': 'eth',
                '56': 'bsc',
                '137': 'polygon',
                '42161': 'arbitrum',
                '10': 'optimism',
                '8453': 'base',
                '43114': 'avalanche',
                '250': 'fantom',
                '25': 'cronos',
                '1101': 'polygon_zkevm',
                '324': 'zksync',
                '59144': 'linea',
                '7777777': 'zora',
                '534352': 'scroll',
                '81457': 'blast',
                '501': 'solana',
                '784': 'sui',
                '196': 'xlayer',
                'sui': 'sui'
            };
            
            return chainMap[chainId] || 'bsc'; // 默认返回bsc
        }

        // 将十六进制颜色转换为带透明度的rgba字符串
        function hexToRgba(hex, alpha) {
            try {
                let h = hex.replace('#', '').trim();
                if (h.length === 3) {
                    h = h.split('').map(c => c + c).join('');
                }
                const bigint = parseInt(h, 16);
                const r = (bigint >> 16) & 255;
                const g = (bigint >> 8) & 255;
                const b = bigint & 255;
                const a = (typeof alpha === 'number') ? alpha : 1;
                return `rgba(${r},${g},${b},${a})`;
            } catch (e) {
                return 'rgba(240,185,11,0.1)';
            }
        }

        // 判断是否使用 Debot（仅允许的 EVM 链）
        function shouldUseDebot(chainId) {
            const normalized = String(chainId).trim().toLowerCase();
            // 仅以下7条链使用 Debot：ETH, BSC, Base, Solana, X Layer, Polygon, Arbitrum
            const debotAllowed = new Set(['1','56','8453','501','196','137','42161']);
            return debotAllowed.has(normalized);
        }
        
        // 检查版本更新
        function checkForVersionUpdate() {
            fetch('/version.json')
                .then(response => response.json())
                .then(versionData => {
                    if (versionData && versionData.version) {
                        checkVersionAndRefresh(versionData.version);
                    }
                })
                .catch(error => {
                    console.error('版本检查错误:', error);
                });
        }
        
        // 全局变量存储推广数据
        let globalPromoData = null;
        
        // 加载推荐工具数据
        function loadPromoData() {
            fetch('/zh/promo-data.json')
                .then(response => response.json())
                .then(data => {
                    if (data && data.promo_items && Array.isArray(data.promo_items)) {
                        globalPromoData = data.promo_items; // 存储全局数据
                        renderPromoTools(data.promo_items);
                        
                        if (Array.isArray(window.todayAirdrops) && Array.isArray(window.upcomingAirdrops)) {
                            const hasAnyAirdrops = (window.todayAirdrops.length > 0) || (window.upcomingAirdrops.length > 0);
                            if (!hasAnyAirdrops) {
                                renderAirdropTable(window.todayAirdrops, 'today-airdrops');
                                renderAirdropTable(window.upcomingAirdrops, 'upcoming-airdrops');
                            }
                        }
                    } else {
                        displayPromoNoDataMessage();
                    }
                })
                .catch(error => {
                    console.error('加载推荐工具数据失败:', error);
                    displayPromoNoDataMessage();
                });
        }
        
        // 渲染推荐工具表格
        function renderPromoTools(promoItems) {
            const tableBody = document.querySelector('#promo-tools tbody');
            tableBody.innerHTML = '';
            
            // 过滤掉 fallback 类型的项目（用于暂无数据时显示）
            const displayItems = promoItems.filter(item => item.category !== 'fallback');
            
            if (displayItems.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td style="text-align: center; padding: 30px;">
                            <div style="color: var(--muted); margin-bottom: 12px;">暂无推荐工具</div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            // 按order字段排序
            displayItems.sort((a, b) => (a.order || 999) - (b.order || 999));
            
            displayItems.forEach(item => {
                const row = document.createElement('tr');
                const toolCell = document.createElement('td');
                
                // 工具名称使用链接（如果可用）
                let toolNameHtml = item.name;
                if (item.url && item.status === 'active') {
                    toolNameHtml = `<a class="token-link" href="${item.url}" target="_blank" rel="noopener">${item.name}<i class="bi ${item.icon} contract-icon"></i></a>`;
                } else {
                    toolNameHtml = `${item.name}<i class="bi ${item.icon} contract-icon"></i>`;
                }
                
                toolCell.innerHTML = `
                    <div class="token-name">
                        <div>
                            <div class="token-symbol">
                                ${toolNameHtml}
                            </div>
                            <div class="token-fullname">${item.description}</div>
                        </div>
                    </div>
                `;
                
                row.appendChild(toolCell);
                tableBody.appendChild(row);
            });
        }
        
        
        // 已去除时间戳参数，交由上游缓存控制刷新节奏
        
        function refreshData(clearCache) {
            // 每次刷新时也检查版本更新
            checkForVersionUpdate();
            
            document.querySelector('#today-airdrops tbody').innerHTML = `
                <tr>
                    <td colspan="4" class="loading">
                        <div class="spinner"></div>
                        <p>加载中...</p>
                    </td>
                </tr>
            `;
            document.querySelector('#upcoming-airdrops tbody').innerHTML = `
                <tr>
                    <td colspan="4" class="loading">
                        <div class="spinner"></div>
                        <p>加载中...</p>
                    </td>
                </tr>
            `;
            showRefreshingIndicator();
            loadAirdropData(clearCache);
            const refreshInterval = 10 * 60 * 1000;
            resetCountdown(refreshInterval / 1000);
        }
        function showRefreshingIndicator() {
            // 显示刷新中的状态
            const refreshBtn = document.getElementById('refreshButton');
            if (refreshBtn) {
                const icon = refreshBtn.querySelector('i');
                icon.classList.add('rotating');
                setTimeout(() => {
                    icon.classList.remove('rotating');
                }, 1000);
            }
        }
        function resetCountdown(seconds) {
            const countdownEl = document.getElementById('refreshCountdown');
            if (!countdownEl) return;
            let remainingSeconds = seconds;
            if (window.countdownInterval) {
                clearInterval(window.countdownInterval);
            }
            function updateCountdown() {
                if (!document.getElementById('refreshCountdown')) {
                    clearInterval(window.countdownInterval);
                    return;
                }
                const minutes = Math.floor(remainingSeconds / 60);
                const secs = Math.floor(remainingSeconds % 60);
                document.getElementById('refreshCountdown').textContent =
                    `(${minutes}:${secs < 10 ? '0' : ''}${secs}后自动刷新)`;
                remainingSeconds--;
                if (remainingSeconds < 0) {
                    clearInterval(window.countdownInterval);
                    setTimeout(() => refreshData(true), 100);
                }
            }
            updateCountdown();
            window.countdownInterval = setInterval(updateCountdown, 1000);
        }
        // 已移除单个代币价格请求逻辑，统一依赖 batch=all
        function loadAirdropData(forceFresh = false) {
            fetch(`/api/data?fresh=${forceFresh ? '1' : '0'}`)
                .then(response => response.json())
                .then(async data => {
                    if (!data || !data.airdrops || !Array.isArray(data.airdrops)) {
                        displayNoDataMessage();
                        return;
                    }
                    const processedData = processAirdropData(data.airdrops);
                    renderAirdrops(processedData);
                    updateLastUpdateTime();
                    
                    // 只获取当天显示且有数量的代币价格
                    const displayedAirdrops = [...window.todayAirdrops || []];
                    if (displayedAirdrops.length === 0) {
                        return; // 如果没有当天的代币，直接返回
                    }
                    
                    // 收集需要处理的代币
                    const tokensToFetch = new Set();
                    const tokensNeedingDex = []; // 需要DEX价格的代币数组，包含合约信息
                    
                    displayedAirdrops.forEach(airdrop => {
                        if (airdrop.token && airdrop.amount && !isNaN(parseFloat(airdrop.amount))) {
                            const token = airdrop.token;
                            tokensToFetch.add(token);
                            
                            // 收集需要DEX价格的代币
                            if (airdrop.contract_address && airdrop.chain_id) {
                                if (!tokensNeedingDex.some(item => item.token === token)) {
                                    tokensNeedingDex.push({
                                        token: token,
                                        contract_address: airdrop.contract_address,
                                        chain_id: airdrop.chain_id
                                    });
                                }
                            }
                        }
                    });
                    
                    if (tokensToFetch.size > 0) {
                        // 1. 先批量获取所有缓存价格
                        try {
                            // 使用优化的today API，只获取今日空投相关的token价格
                            const batchResponse = await fetch(`/api/price/?batch=today`);
                            const batchData = await batchResponse.json();
                            
                            if (batchData.success) {
                                // 更新缓存和UI
                                for (const [token, priceData] of Object.entries(batchData.prices)) {
                                    updatePriceDisplay(token, priceData, displayedAirdrops);
                                }
                                // 不再触发单币补齐，渲染仅依赖 batch=all 返回内容
                            }
                        } catch (error) { }
                    }
                })
                .catch(error => {
                    displayNoDataMessage();
                });
        }
        
        // 更新价格显示函数 - 交易所价格和DEX价格分行显示
        function updatePriceDisplay(token, priceData, airdrops, priceElements, priceType = null) {
            // 找到匹配的空投数据
            const matchingAirdrops = airdrops.filter(airdrop => airdrop.token === token);
            
            if (matchingAirdrops.length === 0) {
                return;
            }
            
            matchingAirdrops.forEach(airdrop => {
                if (!airdrop.amount || isNaN(parseFloat(airdrop.amount))) return;
                
                const amount = parseFloat(airdrop.amount);
                
                // 更新价格数据，只保留1位小数
                if ((!priceType || priceType === 'exchange') && !airdrop.has_homonym) {
                    if (priceData.price && priceData.price > 0) {
                        airdrop.price = priceData.price;
                        airdrop.value = Math.round(priceData.price * amount * 10) / 10;
                    }
                }
                
                // 处理DEX价格 - 兼容两种API返回格式
                if (!priceType || priceType === 'dex') {
                    // 1. 检查dex_price字段
                    if (priceData.dex_price && priceData.dex_price > 0) {
                        airdrop.dex_price = priceData.dex_price;
                        airdrop.dex_value = Math.round(priceData.dex_price * amount * 10) / 10;
                    } 
                    // 2. 如果dex_price不存在但source包含"dex"，则使用price字段作为DEX价格
                    else if (priceData.source && 
                             (priceData.source.includes('dex') || priceData.source.includes('DEX')) && 
                             priceData.price && priceData.price > 0) {
                        airdrop.dex_price = priceData.price;
                        airdrop.dex_value = Math.round(priceData.price * amount * 10) / 10;
                    }
                }
                
                // 找到这个代币对应的所有价格容器并更新
                const containers = document.querySelectorAll(`.price-container[data-token="${token}"]`);
                
                containers.forEach(container => {
                    // 清空现有容器
                    container.innerHTML = '';
                    
                    // 添加DEX价格 - 放在上面，使用黄色，带链接
                    if (airdrop.dex_price && airdrop.dex_price > 0) {
                        const dexEl = document.createElement('div');
                        dexEl.className = 'value-text dex-price-value';
                        
                        // 判断空投时间是否还没到
                        const nowTimestamp = Math.floor(Date.now() / 1000);
                        let isUpcoming = false;
                        
                        if (airdrop.dateTime) {
                            let compareTimestamp = Math.floor(airdrop.dateTime.getTime() / 1000);
                            
                            // 如果是第二阶段，减去18小时（18 * 60 * 60 = 64800秒）
                            if (airdrop.phase === 2) {
                                compareTimestamp = compareTimestamp - 64800;
                            }
                            
                            // TGE特殊处理
                            if (airdrop.type === 'tge') {
                                if (airdrop.pretge === true) {
                                    // Pre-TGE项目一直显示信息图标（因为预售无价格）
                                    isUpcoming = true;
                                } else {
                                    // TGE项目按照时间+2小时判断过期
                                    const tgeEndTimestamp = compareTimestamp + (2 * 60 * 60); // 加2小时
                                    isUpcoming = nowTimestamp < tgeEndTimestamp;
                                }
                            } else {
                                isUpcoming = nowTimestamp < compareTimestamp;
                            }
                        }
                        
                        if (isUpcoming) {
                            const chainName = getChainName(airdrop.chain_id);
                            const rawContract = (airdrop.contract_address || '');
                            const isEvmAddress = rawContract && rawContract.startsWith('0x');
                            const contract = isEvmAddress ? rawContract.toLowerCase() : rawContract;
                            const useDebot = shouldUseDebot(airdrop.chain_id);
                            const linkUrl = (!useDebot || String(airdrop.chain_id).trim() === '784' || String(airdrop.chain_id).trim().toLowerCase() === 'sui')
                                ? `https://web3.okx.com/token/${chainName}/${rawContract}`
                                : `https://debot.ai/token/${chainName}/245734_${contract}`;
                            dexEl.innerHTML = `<i class="bi bi-info-circle price-info-icon" title="点击查看说明" onclick="showPriceInfo()"></i> <a class="price-link" href="${linkUrl}" target="_blank" rel="noopener">$${airdrop.dex_value.toFixed(1)}</a><span style="display:inline-block; width:12px;"></span> `;
                        } else {
                            const chainName = getChainName(airdrop.chain_id);
                            const rawContract = (airdrop.contract_address || '');
                            const isEvmAddress = rawContract && rawContract.startsWith('0x');
                            const contract = isEvmAddress ? rawContract.toLowerCase() : rawContract;
                            const useDebot = shouldUseDebot(airdrop.chain_id);
                            const linkUrl = (!useDebot || String(airdrop.chain_id).trim() === '784' || String(airdrop.chain_id).trim().toLowerCase() === 'sui')
                                ? `https://web3.okx.com/token/${chainName}/${rawContract}`
                                : `https://debot.ai/token/${chainName}/245734_${contract}`;
                            dexEl.innerHTML = `<a class="price-link" href="${linkUrl}" target="_blank" rel="noopener" title="查看DEX价格"><i class="bi bi-activity dex-price-icon"></i></a> <a class="price-link" href="${linkUrl}" target="_blank" rel="noopener">$${airdrop.dex_value.toFixed(1)}</a><span style="display:inline-block; width:12px;"></span> `;
                        }
                        
                        container.appendChild(dexEl);
                    }
                    
                    // 添加交易所价格（对于有同名币种不显示交易所价格） - 放在下面，使用白色
                    if (airdrop.price && airdrop.price > 0 && !airdrop.has_homonym) {
                        const exchangeEl = document.createElement('div');
                        exchangeEl.className = 'value-text exchange-price-value';
                        exchangeEl.innerHTML = `$${airdrop.value.toFixed(1)}`;
                        container.appendChild(exchangeEl);
                    }
                });
            });
        }

        function processAirdropData(airdrops) {
            const processedAirdrops = JSON.parse(JSON.stringify(airdrops));
            const today = new Date();
            const todayYear = today.getFullYear();
            const todayMonth = today.getMonth() + 1;
            const todayDay = today.getDate();
            const todayFormatted = `${todayYear}-${todayMonth.toString().padStart(2, '0')}-${todayDay.toString().padStart(2, '0')}`;
            const todayStart = new Date(todayYear, todayMonth - 1, todayDay, 0, 0, 0).getTime() / 1000;
            const todayEnd = new Date(todayYear, todayMonth - 1, todayDay, 23, 59, 59).getTime() / 1000;
            const nowTimestamp = Math.floor(Date.now() / 1000);
            
            // 处理每个空投数据，转换时区
            processedAirdrops.forEach(airdrop => {
                if (airdrop.completed) {
                    // 已完成的空投不需要额外处理
                }
                
                // 处理有日期和时间的空投
                if (airdrop.date && airdrop.time) {
                    try {
                        // 检查是否是二段空投
                        const isPhase2 = airdrop.phase === 2;
                        
                        // 使用时区助手将北京时间转换为本地时间
                        const localTimeInfo = TimeZoneHelper.convertBeijingToLocal(
                            airdrop.date, 
                            airdrop.time,
                            isPhase2
                        );
                        
                        if (localTimeInfo.success) {
                            // 存储原始北京时间
                            airdrop.beijing_date = airdrop.date;
                            airdrop.beijing_time = airdrop.time;
                            
                            // 转换为用户本地时区
                            airdrop.date = localTimeInfo.date;
                            airdrop.time = localTimeInfo.time;
                            airdrop.dateTime = localTimeInfo.dateTime;
                            
                            // 检查空投是否已过期
                            const endTimeObj = new Date(localTimeInfo.dateTime.getTime() + 24 * 60 * 60 * 1000);
                            const endTimestamp = Math.floor(endTimeObj.getTime() / 1000);
                            if (nowTimestamp > endTimestamp) {
                                airdrop.expired = true;
                                airdrop.completed = true;
                            }
                        }
                    } catch (e) {
                        console.error("处理空投时间出错:", e);
                    }
                } 
                // 处理只有日期没有时间的空投 - 添加这段逻辑
                else if (airdrop.date && (!airdrop.time || airdrop.time.trim() === '')) {
                    try {
                        // 使用时区助手将北京日期转换为本地日期（使用下午2点作为默认时间点）
                        const localTimeInfo = TimeZoneHelper.convertBeijingToLocal(
                            airdrop.date,
                            "14:00", // 默认使用下午2点
                            false
                        );
                        
                        if (localTimeInfo.success) {
                            // 存储原始北京时间
                            airdrop.beijing_date = airdrop.date;
                            
                            // 转换为用户本地时区的日期
                            airdrop.date = localTimeInfo.date;
                            // 创建dateTime对象，这是关键点
                            airdrop.dateTime = localTimeInfo.dateTime;
                            
                            // 检查是否过期
                            const endTimeObj = new Date(localTimeInfo.dateTime.getTime() + 24 * 60 * 60 * 1000);
                            const endTimestamp = Math.floor(endTimeObj.getTime() / 1000);
                            if (nowTimestamp > endTimestamp) {
                                airdrop.expired = true;
                                airdrop.completed = true;
                            }
                        }
                    } catch (e) {
                        console.error("处理空投日期出错:", e);
                    }
                }
            });
            
            return processedAirdrops;
        }
        
        function displayNoDataMessage() {
            const noDataMessage = `
                <tr>
                    <td colspan="4" style="text-align: center; padding: 30px;">
                        <div style="color: var(--muted); margin-bottom: 12px;">暂无数据</div>
                    </td>
                </tr>
            `;
            document.querySelector('#today-airdrops tbody').innerHTML = noDataMessage;
            document.querySelector('#upcoming-airdrops tbody').innerHTML = noDataMessage;
        }
        
        function updateLastUpdateTime() {
            const now = new Date();
            const formattedTime = now.toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            }).replace(/\//g, '-');
        }
        
        // 确保页面始终使用暗黑模式
        document.addEventListener('DOMContentLoaded', function() {
            const htmlEl = document.documentElement;
            htmlEl.classList.add('dark-mode');
        });
        
        function renderAirdrops(airdrops) {
            const systemNow = new Date();
            const today = new Date();
            
            // 根据本地时区获取今天的日期
            const todayYear = today.getFullYear();
            const todayMonth = today.getMonth() + 1;
            const todayDay = today.getDate();
            const todayFormatted = `${todayYear}-${todayMonth.toString().padStart(2, '0')}-${todayDay.toString().padStart(2, '0')}`;
            const todayStart = new Date(todayYear, todayMonth - 1, todayDay, 0, 0, 0).getTime() / 1000;
            const todayEnd = new Date(todayYear, todayMonth - 1, todayDay, 23, 59, 59).getTime() / 1000;
            const nowTimestamp = Math.floor(Date.now() / 1000);
            
            // 按日期排序
            airdrops.sort((a, b) => {
                const dateA = a.date || '9999-12-31';
                const dateB = b.date || '9999-12-31';
                if (!dateA) return 1;
                if (!dateB) return -1;
                return dateA.localeCompare(dateB);
            });
            
            // 过滤今日空投 - 使用本地时区
            const todayAirdrops = airdrops.filter(airdrop => {
                const status = airdrop.status?.toLowerCase();
                const isOngoing = status === 'ongoing' || status === 'active' || status === 'live';
                
                // 使用dateTime对象检查是否为今天
                if (airdrop.dateTime) {
                    if (TimeZoneHelper.isToday(airdrop.dateTime)) {
                        return true;
                    }
                } 
                // 对于没有具体时间的空投，检查日期是否为今天
                else if (airdrop.date) {
                    const isToday = airdrop.date === todayFormatted;
                    if (isToday) return true;
                }
                // 处理状态为"ongoing"但没有具体日期的空投
                else if (isOngoing) {
                    if (airdrop.system_timestamp) {
                        const isToday = airdrop.system_timestamp >= todayStart && airdrop.system_timestamp <= todayEnd;
                        return isToday;
                    }
                    return true;
                }
                
                return false;
            });
            
            // 过滤未来空投 - 使用本地时区
            const upcomingAirdrops = airdrops.filter(airdrop => {
                // 使用dateTime对象检查是否是未来
                if (airdrop.dateTime) {
                    if (!TimeZoneHelper.isToday(airdrop.dateTime)) {
                        const futureDate = new Date();
                        futureDate.setHours(23, 59, 59, 999);
                        return airdrop.dateTime > futureDate;
                    }
                } 
                // 对于没有具体时间的空投，检查日期是否为未来
                else if (airdrop.date) {
                    const isFuture = airdrop.date > todayFormatted;
                    return isFuture;
                }
                
                return false;
            });
            
            // 保存到全局变量，用于价格更新
            window.todayAirdrops = todayAirdrops;
            window.upcomingAirdrops = upcomingAirdrops;
            
            // 渲染表格
            renderAirdropTable(todayAirdrops, 'today-airdrops');
            renderAirdropTable(upcomingAirdrops, 'upcoming-airdrops');
        }
        
        function renderAirdropTable(airdrops, tableId) {
            const tableBody = document.querySelector(`#${tableId} tbody`);
            tableBody.innerHTML = '';
            if (airdrops.length === 0) {
                let promoContent = '<div style="color: var(--muted); margin-bottom: 12px;">暂无数据</div>';
                
                if (globalPromoData && Array.isArray(globalPromoData)) {
                    const fallbackItem = globalPromoData.find(item => 
                        item.category === 'fallback' && 
                        item.fallback_type === tableId &&
                        item.status === 'active'
                    );
                    if (fallbackItem) {
                        // 支持在 promo-data.json 中使用可选的 color 字段，自定义按钮主色；默认使用黄色
                        const color = (fallbackItem.color && typeof fallbackItem.color === 'string' && fallbackItem.color.trim() !== '')
                            ? fallbackItem.color.trim()
                            : '#f0b90b';
                        const hoverBgColor = hexToRgba(color, 0.1);

                        promoContent = `
                            <div style="color: var(--muted); margin-bottom: 12px;">暂无数据</div>
                            <div style="margin-top: 16px;">
                                <a href="${fallbackItem.url}" target="_blank" rel="noopener" 
                                   style="display: inline-flex; align-items: center; gap: 8px; color: ${color}; text-decoration: none; font-size: 14px; padding: 8px 12px; border: 1px solid ${color}; border-radius: 6px; transition: all 0.2s ease;"
                                   onmouseover="this.style.backgroundColor='${hoverBgColor}'" 
                                   onmouseout="this.style.backgroundColor='transparent'">
                                    <i class="bi ${fallbackItem.icon}"></i>
                                    <span>${fallbackItem.name}</span>
                                </a>
                            </div>
                        `;
                    }
                }
                
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="4" style="text-align: center; padding: 30px;">
                            ${promoContent}
                        </td>
                    </tr>
                `;
                return;
            }
            airdrops.forEach((airdrop, index) => {
                const row = document.createElement('tr');
                const tokenCell = document.createElement('td');
                const tokenSymbol = airdrop.token || 'UNKNOWN';
                let projectName = airdrop.name || '未知项目';
                if (airdrop.type === 'warning') {
                    projectName = `<span style="color: var(--alert-color);">预测</span>`;
                }
                
                // 为token添加 Debot/OKX 链接
                let tokenSymbolHtml = tokenSymbol;
                if (airdrop.chain_id && airdrop.contract_address) {
                    const chainName = getChainName(airdrop.chain_id);
                    const rawContract = (airdrop.contract_address || '');
                    const isEvmAddress = rawContract && rawContract.startsWith('0x');
                    const contract = isEvmAddress ? rawContract.toLowerCase() : rawContract;
                    const useDebot = shouldUseDebot(airdrop.chain_id);
                    const linkUrl = (!useDebot || String(airdrop.chain_id).trim() === '784' || String(airdrop.chain_id).trim().toLowerCase() === 'sui')
                        ? `https://web3.okx.com/token/${chainName}/${rawContract}`
                        : `https://debot.ai/token/${chainName}/245734_${contract}`;
                    
                    // 根据是否现货/合约上市设置图标颜色和提示（现货优先，且只显示一个）
                    const isFuturesListed = airdrop.futures_listed === true;
                    const isSpotListed = airdrop.spot_listed === true;
                    let iconHtml = '';
                    if (isSpotListed) {
                        iconHtml = '<i class="bi bi-file-earmark-text contract-icon" style="color:#f0b90b; display:inline; margin-left:4px;" title="币安现货"></i>';
                    } else if (isFuturesListed) {
                        iconHtml = '<i class="bi bi-file-earmark-text contract-icon" style="color:#22c55e; margin-left:4px;" title="币安合约"></i>';
                    } else {
                        iconHtml = '<i class="bi bi-file-earmark-text contract-icon" style="margin-left:4px;"></i>';
                    }
                    tokenSymbolHtml = `<a class="token-link" href="${linkUrl}" target="_blank" rel="noopener">${tokenSymbol}${iconHtml}</a>`;
                }
                
                tokenCell.innerHTML = `
                    <div class="token-name">
                        <div>
                            <div class="token-symbol">
                                ${tokenSymbolHtml}
                            </div>
                            <div class="token-fullname">${projectName}</div>
                        </div>
                    </div>
                `;
                row.appendChild(tokenCell);
                const pointsCell = document.createElement('td');
                pointsCell.innerHTML = `<span class="points-badge">${airdrop.points || '-'}</span>`;
                row.appendChild(pointsCell);
                const amountCell = document.createElement('td');
                if (airdrop.amount) {
                    const amount = parseFloat(airdrop.amount);
                    let html = '';
                    
                    // 为TGE项目在数量前添加黄色信息图标
                    if (airdrop.type === 'tge' && airdrop.target_bnb && airdrop.actual_bnb) {
                        const targetBnb = parseFloat(airdrop.target_bnb);
                        const actualBnb = parseFloat(airdrop.actual_bnb);
                        const oversubscription = (actualBnb / targetBnb).toFixed(2);
                        const airdropDataStr = JSON.stringify(airdrop).replace(/"/g, '&quot;');
                        
                        html += `<i class="bi bi-bar-chart-fill tge-info-icon" 
                                   onclick="showTgeInfo('${airdrop.token}', ${targetBnb}, ${actualBnb}, ${oversubscription}, JSON.parse('${airdropDataStr}'))" 
                                   title="点击查看TGE统计信息" 
                                   style="color: #F0B90B; cursor: pointer; font-size: 14px; -webkit-tap-highlight-color: transparent; touch-action: manipulation;"></i> `;
                    }
                    
                    html += `<span class="points-badge points-badge--compact">${amount}</span>`;
                    html += `<br><div class="price-container" data-token="${airdrop.token}"></div>`;
                    amountCell.innerHTML = html;
                } else {
                    amountCell.innerHTML = `<span class="points-badge">-</span>`;
                }
                row.appendChild(amountCell);
                const timeCell = document.createElement('td');
                let timeText = '待公布';
                
                // 使用dateTime对象显示本地化的时间
                if (airdrop.dateTime) {
                    // 检查是否真的有具体时间（而不只是我们为了计算添加的默认时间）
                    if (airdrop.beijing_time && airdrop.beijing_time.trim() !== '') {
                        if (tableId === 'today-airdrops') {
                            // 今日空投只显示时间
                            timeText = TimeZoneHelper.formatTime(airdrop.dateTime);
                        } else {
                            // 空投预告显示日期和时间
                            if (TimeZoneHelper.isTomorrow(airdrop.dateTime)) {
                                timeText = `明天 ${TimeZoneHelper.formatTime(airdrop.dateTime)}`;
                            } else if (TimeZoneHelper.isDayAfterTomorrow(airdrop.dateTime)) {
                                timeText = `后天 ${TimeZoneHelper.formatTime(airdrop.dateTime)}`;
                            } else {
                                const month = airdrop.dateTime.getMonth() + 1;
                                const day = airdrop.dateTime.getDate();
                                timeText = `${month}月${day}日 ${TimeZoneHelper.formatTime(airdrop.dateTime)}`;
                            }
                        }
                    
                        // 如果是二段空投，添加标记
                        if (airdrop.phase === 2) {
                            timeText += "<br />(二段)";
                        }
                    } else {
                        // 有dateTime但没有具体时间，说明这是只有日期没有时间的空投
                        if (tableId === 'today-airdrops') {
                            // 今日空投中的无时间项目显示"待公布"
                            timeText = '待公布';
                        } else {
                            // 空投预告中显示日期
                            if (TimeZoneHelper.isTomorrow(airdrop.dateTime)) {
                                timeText = '明天';
                            } else if (TimeZoneHelper.isDayAfterTomorrow(airdrop.dateTime)) {
                                timeText = '后天';
                            } else {
                                const month = airdrop.dateTime.getMonth() + 1;
                                const day = airdrop.dateTime.getDate();
                                timeText = `${month}月${day}日`;
                            }
                        }
                    }
                } else if (airdrop.time && airdrop.time.trim() !== '') {
                    // 备用：如果没有dateTime对象但有时间
                    timeText = airdrop.time;
                } else if (airdrop.date && airdrop.date.trim() !== '') {
                    // 处理只有日期没有时间的情况
                    try {
                        // 如果是今日空投，无时间则显示"待公布"
                        if (tableId === 'today-airdrops') {
                            timeText = '待公布';
                        } 
                        // 只有预告才显示日期
                        else {
                            // 创建北京时间的日期对象（将日期视为UTC+8）
                            const beijingDateParts = airdrop.date.split('-');
                            if (beijingDateParts.length === 3) {
                                // 使用相同的转换逻辑处理只有日期的情况
                                const localTimeInfo = TimeZoneHelper.convertBeijingToLocal(
                                    airdrop.date, 
                                    "14:00", // 默认使用下午2点，减少时区影响
                                    false
                                );
                                
                                if (localTimeInfo.success) {
                                    const dateObj = localTimeInfo.dateTime;
                                    if (!isNaN(dateObj.getTime())) {
                                        if (TimeZoneHelper.isTomorrow(dateObj)) {
                                            timeText = '明天';
                                        } else if (TimeZoneHelper.isDayAfterTomorrow(dateObj)) {
                                            timeText = '后天';
                                        } else {
                                            const month = dateObj.getMonth() + 1;
                                            const day = dateObj.getDate();
                                            timeText = `${month}月${day}日`;
                                        }
                                    }
                                } else {
                                    // 如果转换失败，使用原来的方式（作为备用）
                                    const dateObj = new Date(airdrop.date);
                                    if (!isNaN(dateObj.getTime())) {
                                        if (TimeZoneHelper.isTomorrow(dateObj)) {
                                            timeText = '明天';
                                        } else if (TimeZoneHelper.isDayAfterTomorrow(dateObj)) {
                                            timeText = '后天';
                                        } else {
                                            const month = dateObj.getMonth() + 1;
                                            const day = dateObj.getDate();
                                            timeText = `${month}月${day}日`;
                                        }
                                    }
                                }
                            }
                        }
                    } catch (e) {
                        console.error("格式化日期出错:", e);
                    }
                }
                
                let typeHtml = '';
                let hasStatusIcon = false; // 标记是否已有状态图标
                
                if (airdrop.dateTime || (airdrop.time && airdrop.time.trim() !== '')) {
                    if (airdrop.expired || airdrop.completed) {
                        typeHtml = `<i class="bi bi-check-circle-fill completed-icon" title="已领取完毕"></i>`;
                        hasStatusIcon = true;
                    } else if (airdrop.type === 'grab') {
                        typeHtml = `<i class="bi bi-lightning-fill" style="color: var(--grab-color); margin-left: 6px;" title="先到先得"></i>`;
                        hasStatusIcon = true;
                    }
                }
                
                // 为 TGE 类型添加特殊标记
                let timeDisplay = timeText;
                if (airdrop.type === 'tge') {
                    if (airdrop.pretge === true) {
                        timeDisplay += '<br />(Pre-TGE)';
                    } else if (airdrop.bctge === true) {
                        timeDisplay += '<br />(BC-TGE)';
                    } else {
                        timeDisplay += '<br />(TGE)';
                    }
                }
                
                // 添加预警说明小字
                let warningNote = '';
                if (airdrop.type === 'warning') {
                    warningNote = `<div style="font-size:0.75em;color:#999;margin-top:3px;line-height:1.2;font-style:italic;">
                        <i class="bi bi-info-circle-fill" style="color:var(--alert-color);font-size:0.9em;"></i> 
                        基于链上数据预测，可能误报
                    </div>`;
                }
                
                // 为空投预告添加图标：第二段显示闪电，非第二段显示订阅铃铛
                if (tableId === 'upcoming-airdrops') {
                    if (airdrop.phase === 2) {
                        // 第二段空投显示闪电图标
                        typeHtml = `<i class="bi bi-lightning-fill" style="color: var(--grab-color); margin-left: 6px;" title="第二段空投"></i>`;
                    } else {
                        // 非第二段显示订阅铃铛
                        typeHtml = `<button class="reminder-bell" onclick="openTwitterModal()" title="点击关注推特获取提前20分钟通知">
                            <svg viewBox="0 0 24 24" aria-hidden="true" class="bell-svg">
                                <g><path d="M22 5v2h-3v3h-2V7h-3V5h3V2h2v3h3zm-.86 13h-4.241c-.464 2.281-2.482 4-4.899 4s-4.435-1.719-4.899-4H2.87L4 9.05C4.51 5.02 7.93 2 12 2v2C8.94 4 6.36 6.27 5.98 9.3L5.13 16h13.73l-.38-3h2.02l.64 5zm-6.323 0H9.183c.412 1.164 1.51 2 2.817 2s2.405-.836 2.817-2z"></path></g>
                            </svg>
                        </button>`;
                    }
                }
                
                timeCell.innerHTML = `<div class="time-cell">${timeDisplay} ${typeHtml}</div>${warningNote}`;
                row.appendChild(timeCell);
                tableBody.appendChild(row);
            });
        }
        
        function formatDateTime(timestamp) {
            if (!timestamp) return '未知时间';
            const date = new Date(timestamp * 1000);
            return date.toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            }).replace(/\//g, '-');
        }
        
        // 推特提醒模态框相关函数
        function openTwitterModal() {
            document.getElementById('twitterReminderModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }
        
        function closeTwitterModal() {
            document.getElementById('twitterReminderModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        // 处理推特链接跳转（移动端优先跳转到app）
        function handleTwitterLink(event) {
            event.preventDefault();
            
            // 检测是否是移动设备
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            if (isMobile) {
                // 尝试打开推特app
                window.location.href = 'twitter://user?screen_name=alpha123cc';
                
                // 如果app没有安装，2秒后跳转到网页版
                setTimeout(function() {
                    window.open('https://twitter.com/alpha123cc', '_blank');
                }, 2000);
            } else {
                // 桌面端直接打开网页版
                window.open('https://twitter.com/alpha123cc', '_blank');
            }
        }
        
        // 添加信息图标样式和推荐工具样式
        const style = document.createElement('style');
        style.textContent = `
            .price-info-icon {
                color: #F0B90B !important;
                cursor: pointer;
                transition: color 0.2s ease;
                -webkit-tap-highlight-color: transparent;
                touch-action: manipulation;
            }
            .price-info-icon:hover {
                color: #D19F0B !important;
            }
            
        `;
        document.head.appendChild(style);

        // 显示价格信息提示
        function showPriceInfo() {
            const message = '盘前临近才有参考价值，来源1inch或pancake';
            
            // 创建简洁的提示框
            const tooltip = document.createElement('div');
            tooltip.className = 'price-info-tooltip';
            tooltip.textContent = message;
            tooltip.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0, 0, 0, 0.9);
                color: white;
                padding: 12px 16px;
                border-radius: 6px;
                font-size: 14px;
                z-index: 10000;
                max-width: 280px;
                text-align: center;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
                pointer-events: none;
                opacity: 0;
                transition: opacity 0.3s ease;
            `;
            
            document.body.appendChild(tooltip);
            
            // 淡入效果
            setTimeout(() => {
                tooltip.style.opacity = '1';
            }, 10);
            
            // 2秒后自动消失
            setTimeout(() => {
                tooltip.style.opacity = '0';
                setTimeout(() => {
                    if (tooltip.parentNode) {
                        document.body.removeChild(tooltip);
                    }
                }, 300);
            }, 2000);
        }

        // 点击模态框背景关闭
        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('twitterReminderModal');
            if (modal) {
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        closeTwitterModal();
                    }
                });
            }
        });
    </script>
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "s8evkid0ub");
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'983b8a474c93f7db',t:'MTc1ODY0NjIxNg=='};var a=document.createElement('script');a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"05b2f73255d64509b38e379d9142b573","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
</body>
</html>
